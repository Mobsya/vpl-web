{
	"styles": {
		"event": "#ff6e40",
		"state": "#ff6e40",
		"action": "#38f",
		"comment": "#aaa"
	},

	"blocks": [
		{
			"name": "button",
			"type": "event",
			"modes": ["basic", "advanced"],
			"svg": [
				{
					"uri": "Blocks.svg#Ev_Bg_buttons"
				},
				{
					"uri": "Blocks.svg#Ev_Buttons"
				}
			],
			"defaultParameters": [false, false, false, false, false],
			"buttons": [
				{
					"id": "Btn2_Center",
					"val": [false, true],
					"st": ["fill:#ddd", "fill:#f33"]
				},
				{
					"id": "Btn2_Forward",
					"val": [false, true],
					"st": ["fill:#ddd", "fill:#f33"]
				},
				{
					"id": "Btn2_Backward",
					"val": [false, true],
					"st": ["fill:#ddd", "fill:#f33"]
				},
				{
					"id": "Btn2_Right",
					"val": [false, true],
					"st": ["fill:#ddd", "fill:#f33"]
				},
				{
					"id": "Btn2_Left",
					"val": [false, true],
					"st": ["fill:#ddd", "fill:#f33"]
				}
			],
			"aseba": {
				"sectionBegin": "onevent buttons\n",
				"clauseAnd": "{$[i] ? 'button.' + ['center', 'forward', 'backward', 'right', 'left'][i] + ' != 0' : ''}"
			}
		},
		{
			"name": "yaw",
			"type": "event",
			"modes": ["basic", "advanced"],
			"svg": [
				{
					"uri": "Blocks.svg#Rot360Rail"
				},
				{
					"uri": "Blocks.svg#ThymioAcc1"
				},
				{
					"uri": "Blocks.svg#Rot360_Handle"
				}
			],
			"defaultParameters": [0],
			"rotating": [
				{
					"id": "Rot360",
					"centerId": "Rot360",
					"thumbId": "Btn2_HandleAcc0",
					"numSteps": 24
				}
			],
			"aseba": {
				"initVarDecl": [
					"# yaw angle from accelerometer\nvar yawAngle\n"
				],
				"sectionBegin": "onevent acc\n",
				"clauseInit":
					"call math.atan2(yawAngle, acc[0], acc[1])\n",
				"clause": "yawAngle >= {Math.round(2730.67 * $[0] - 1365.33)} and yawAngle < {Math.round(2730.67 * $[0] + 1365.33)}"
			}
		},
		{
			"name": "motor",
			"type": "action",
			"modes": ["basic", "advanced"],
			"svg": [
				{
					"uri": "Blocks.svg#Ac_Wheels"
				}
			],
			"diffwheelmotion": "ThymioTop_wheels_mini",
			"defaultParameters": [0, 0],
			"sliders": [
				{
					"id": "Slid_left",
					"thumbId": "Cursor_left",
					"min": -1,
					"max": 1
				},
				{
					"id": "Slid_right",
					"thumbId": "Cursor_right",
					"min": -1,
					"max": 1
				}
			],
			"aseba": {
				"initCodeExec": [
					"# reset outputs\ncall sound.system(-1)\ncall leds.top(0, 0, 0)\ncall leds.bottom.left(0, 0, 0)\ncall leds.bottom.right(0, 0, 0)\ncall leds.circle(0, 0, 0, 0, 0, 0, 0, 0)\n"
				],
				"statement":
					"motor.left.target = {Math.round(500 * $[0])}\nmotor.right.target = {Math.round(500 * $[1])}\n"
			}
		},
		{
			"name": "move",
			"type": "action",
			"modes": ["basic", "advanced"],
			"svg": [
				{
					"uri": "Blocks.svg#Ac_Directions"
				}
			],
			"defaultParameters": [0],
			"radiobuttons": [
				{
					"id": "StopSign",
					"val": 0,
					"st": ["fill:#ddd", "fill:#f33"]
				},
				{
					"id": "Btn2_FwdDir",
					"val": 1,
					"st": ["fill:#ddd", "fill:#f33"]
				},
				{
					"id": "Btn2_FwdRightDir",
					"val": 2,
					"st": ["fill:#ddd", "fill:#f33"]
				},
				{
					"id": "Btn2_TurnRightDir",
					"val": 3,
					"st": ["fill:#ddd", "fill:#f33"]
				},
				{
					"id": "Btn2_BwdRightDir",
					"val": 4,
					"st": ["fill:#ddd", "fill:#f33"]
				},
				{
					"id": "Btn2_BwdDir",
					"val": 5,
					"st": ["fill:#ddd", "fill:#f33"]
				},
				{
					"id": "Btn2_BwdLeftDir",
					"val": 6,
					"st": ["fill:#ddd", "fill:#f33"]
				},
				{
					"id": "Btn2_TurnLeftDir",
					"val": 7,
					"st": ["fill:#ddd", "fill:#f33"]
				},
				{
					"id": "Btn2_FwdLeftDir",
					"val": 8,
					"st": ["fill:#ddd", "fill:#f33"]
				}
			],
			"aseba": {
				"initCodeExec": [
					"# reset outputs\ncall sound.system(-1)\ncall leds.top(0, 0, 0)\ncall leds.bottom.left(0, 0, 0)\ncall leds.bottom.right(0, 0, 0)\ncall leds.circle(0, 0, 0, 0, 0, 0, 0, 0)\n"
				],
				"statement":
					"motor.left.target = {[0,200,250,100,-150,-200,-250,-100,150][$[0]]}\nmotor.right.target = {[0,200,150,-100,-250,-200,-150,100,250][$[0]]}\n"
			}
		},
		{
			"name": "top color",
			"type": "action",
			"modes": ["basic", "advanced"],
			"svg": [
				{
					"uri": "Blocks.svg#Color_adv"
				}
			],
			"defaultParameters": [0, 0, 0],
			"sliders": [
				{
					"id": "Slid_red",
					"thumbId": "Cursor_red",
					"min": 0,
					"max": 1
				},
				{
					"id": "Slid_green",
					"thumbId": "Cursor_green",
					"min": 0,
					"max": 1
				},
				{
					"id": "Slid_blue",
					"thumbId": "Cursor_blue",
					"min": 0,
					"max": 1
				}
			],
			"styles": [
				{
					"id": "Gradient_top-2",
					"st": "fill:#{$.map(function (c) { return Math.floor(c * 15.999).toString(16); }).join('')}"
				}
			],
			"aseba": {
				"initVarDecl": [
					"# RGB color of the top led\nvar topColor[3]\n"
				],
				"initCodeExec": [
					"topColor = [0, 0, 0]\n",
					"# reset outputs\ncall sound.system(-1)\ncall leds.top(0, 0, 0)\ncall leds.bottom.left(0, 0, 0)\ncall leds.bottom.right(0, 0, 0)\ncall leds.circle(0, 0, 0, 0, 0, 0, 0, 0)\n"
				],
				"statement":
					"call leds.top({$.map(function (x) { return Math.round(32 * x); }).join(', ')})\ntopColor = [{$.map(function (x) { return Math.round(32 * x); }).join(', ')}]\n",
				"statementWithoutInit":
					"call leds.top({$.map(function (x) { return Math.round(32 * x); }).join(', ')})\n"
			}
		}
	],

	"svgFilenames": [
		"Blocks.svg"
	]
}
